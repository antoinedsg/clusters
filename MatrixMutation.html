<!DOCTYPE html>
<html lang="en-GB">

<head>
<div>
	<link rel="stylesheet" type="text/css" href="MatrixMutation.css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
	<!-- Import LaTeX writing (called MathJax) -->
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> 
</div>

</head>


<!-- BODY -->
<body>
	<div><a href="home.html">Back to home</a></div>
	<h2 style="padding: 10px">Matrix mutation</h2>
		 
	</div>
	</div style="padding: 10px">
	<label for=""><p style="text-indent:10px">Type in the matrix you want to mutate.</label><br>
	<br>
	<label for="name">Number of rows:</label>
	<input type="text" id="row_number" name="row_number" size="1">
	<label for="name">Number of columns:</label>
	<input type="text" id="col_number" name="col_number" size="1">
	<label for=""><p style="text-indent:10px">Entries of the matrix:</label><br>
	<p style="text-indent:10px"><textarea id="input_matrix" name="input_matrix" rows="5" cols="33"></textarea>
	
	<label for="mutate_direction"><p style="text-indent:10px">Type in the mutation direction:</label><br>
	<p style="text-indent:10px"><input type="text" id="dir" name="dir" size="1"><br>
	
	<p style="text-indent:10px"><input type="button" value="Mutate" id="" onclick="mutate()" /><br>
	
	<label for="output_matrix"><p style="text-indent:10px">Mutated matrix:</label><br>
	<p style="text-indent:10px"><textarea id="output_matrix" name="output_matrix" rows="5" cols="33"></textarea>
	</div>
	
	</div> <!--mutation algorithm-->
	<script>
	
	var row;
	var col;
	var k;
	
	function nonnegative(n)
	{
		if (n>0) return n;
		else return 0;
	}
	function trimStr(s)
	{
		return s.replace(/(^\s*)|(\s*$)/g,"");
	}
	function mutate()
	{
		row = row_number.value;
		col = col_number.value;
		k = dir.value;
		var s = input_matrix.value;
		s = trimStr(s);
		var count = 0;
		var flag = 1; <!--determine if input is legal-->
		var entry = [];
		entry = s.split(/[(\r\n\s)\r\n\s]+/);
		var a = new Array(); <!--matrix needs mutating-->
		var b = new Array();
		for(var i=1;i<=row;i++)
		{
			a[i]=new Array();
			b[i]=new Array();
		}
		for(var i=1;i<=row;i++)
		{
			for(var j=1;j<=col;j++)
			{
				if(isNaN(entry[count])) flag = 0;
				a[i][j]=parseInt(entry[count]);
				count++;
			}
		}
		if(entry.length != row*col) flag = 0;
		for(var i=1;i<=row;i++)
		{
			for(var j=1;j<=col;j++)
			{
				if(i==k || j==k)
				{
					b[i][j]=-a[i][j];
				}
				else
				{
					b[i][j]=a[i][j]+a[i][k]*nonnegative(a[k][j])+(nonnegative(-a[i][k]))*a[k][j];
				}
			}
		}
		
		var s = "";
		for(var i=1;i<=row;i++)
		{
			for(var j=1;j<=col;j++)
			{
				s = s + (b[i][j].toString())
				s = s + " "
			}
			s = s + "\n";
		}
		if(flag == 1)		
			output_matrix.value=s;
		else
			output_matrix.value="Invalid input";
	}
	</script>
	</div>
	
	
	
	<h4 style="padding: 10px">Setup</h4>
	<div style="padding: 10px">
		For any \((n+m)\times n\) matrix \(B\) and \(k\in \{ 1,..., n\}\), we define a new matrix \(B' = \mu_k(B)\) by the following rule:
		$$
		\begin{aligned}
		&b_{ij}'=\left\{
		\begin{aligned}
		&-b_{ij} &i=k\textup{ or }j=k,\\
		&b_{ij}+b_{ik}[b_{kj}]_+ +[-b_{ik}]_+b_{kj}  &i,j\neq k,
		\end{aligned}
		\right.
		\end{aligned}
		$$
		where \([a]_+ := \max(a,0)\). The matrix \(\mu_k(B)\) is called the mutation of \(B\) in direction \(k\).
	</div>
	<h4 style="padding: 10px">Remark</h4>
	<div style="padding: 10px">
		Both square and non-square matrices are able to be mutated here as long as your entries are consistent with the numbers of rows and columns you input.<br>
		Sample(entries of matrix input):
		$$
		\begin{matrix}
		0 & 1\\
		-1 & 0
		\end{matrix}
		$$
		Actually it still works if you type in unnecessary spaces and new lines like this: 
		$$
		\begin{matrix}
		0 & 1\\
		\\
		-1 & 0
		\end{matrix}
		$$
		You will get "Invalid input" if the number of entries is not equal to the product of the numbers of row and column or if you input non-numbers or you miss filling all the required data.
	</div>
	
</body>

<div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>	
	<script type="text/javascript" src="MatrixMutation.js"></script>
</div>
</html>
